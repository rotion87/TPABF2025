<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>2025 å­¤èŠ³å°éšŠ GOOD FUN TEAM in è‰ç‡å­£</title>
<script src="https://cdn.tailwindcss.com"></script>
<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bangers&family=Noto+Sans+TC:wght@400;600;700;900&display=swap" rel="stylesheet"/>
<style>
:root{
  --yellow:#ffe200;--ink:#111;--cream:#fff7ce;
}
body{
  font-family:'Noto Sans TC',sans-serif;background:var(--cream);
  background-image:repeating-radial-gradient(circle at center,#fff 0 2px,transparent 3px 40px);
  color:var(--ink);overflow-x:hidden;
}
.hero{font-family:'Bangers';color:#111;text-shadow:2px 2px 0 #fff;}
.card{background:#fff;border:3px solid #000;border-radius:1.5rem;box-shadow:4px 4px 0 #000;}
.lang-fab{position:fixed;left:1rem;bottom:calc(env(safe-area-inset-bottom,0px)+1rem);z-index:50;}
.hide-lang .lang-fab{opacity:0;pointer-events:none;transform:translateY(150%);transition:.3s;}
.fruit{position:absolute;font-size:2rem;animation:float 20s linear infinite;}
@keyframes float{
  0%{transform:translateY(0);}
  100%{transform:translateY(-100vh);}
}
</style>
</head>
<body class="pb-32">
<div id="root"></div>

<script type="text/babel">

const LANGS={tw:"ğŸ‡¹ğŸ‡¼",en:"ğŸ‡ºğŸ‡¸",jp:"ğŸ‡¯ğŸ‡µ",kr:"ğŸ‡°ğŸ‡·"};
const TEXT={
  tw:{concept:"è¨­è¨ˆç†å¿µ",about:"é—œæ–¼",board:"ç•™è¨€æ¿ï¼ç°½åˆ°",input:"ä½ çš„åå­—",btn:"é€å‡º",desc:"è¼¸å…¥åå­—å¾Œé€å‡ºï¼ŒæœƒåŒ–èº«ç‚ºä¸€é¡†æ°´æœåœ¨é é¢éŠå‹•"},
  en:{concept:"Concept",about:"About",board:"Board",input:"Your name",btn:"Send",desc:"Enter your name and youâ€™ll appear as a floating fruit."},
  jp:{concept:"ã‚³ãƒ³ã‚»ãƒ—ãƒˆ",about:"ç´¹ä»‹",board:"æ²ç¤ºæ¿",input:"åå‰ã‚’å…¥åŠ›",btn:"é€ä¿¡",desc:"åå‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ãƒ•ãƒ«ãƒ¼ãƒ„ã¨ã—ã¦ãƒšãƒ¼ã‚¸ã«ç¾ã‚Œã¾ã™ã€‚"},
  kr:{concept:"ë””ìì¸ ê°œë…",about:"ì†Œê°œ",board:"ê²Œì‹œíŒ",input:"ì´ë¦„ ì…ë ¥",btn:"ë³´ë‚´ê¸°",desc:"ì´ë¦„ì„ ì…ë ¥í•˜ë©´ ê³¼ì¼ë¡œ í˜ì´ì§€ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤."}
};
const FRUITS=["ğŸ","ğŸŠ","ğŸ‹","ğŸ‰","ğŸ‡","ğŸ“","ğŸ‘","ğŸ","ğŸŒ"];

function LangSwitcher({lang,setLang}){
  return (
    <div className="lang-fab bg-white border-2 border-black rounded-full px-3 py-2 flex gap-2 shadow-md">
      {Object.keys(LANGS).map(k=>(
        <button key={k} onClick={()=>setLang(k)} className={lang===k?"text-2xl":"text-xl"}>{LANGS[k]}</button>
      ))}
    </div>
  );
}

function PunchCard({onDone}){
  const [dragging,setDragging]=React.useState(false);
  const [dropped,setDropped]=React.useState(false);
  const ref=React.useRef(null);

  const onDragStart=e=>{
    setDragging(true);
    e.dataTransfer.setData("text/plain","card");
  };
  const onDragEnd=()=>setDragging(false);
  const onDrop=e=>{
    e.preventDefault();
    setDropped(true);
    setTimeout(onDone,1500);
  };
  return (
    <div className="flex flex-col items-center justify-center h-screen relative">
      {!dropped && <>
        <img src="punch.png" onDragOver={e=>e.preventDefault()} onDrop={onDrop} className="w-64 mb-8"/>
        <img ref={ref} src="punch-card.png" draggable onDragStart={onDragStart} onDragEnd={onDragEnd} className={`w-40 cursor-grab ${dragging?"opacity-70":"opacity-100"}`}/>
      </>}
      {dropped && <div className="text-3xl font-bold mt-6">æ‰“å¡æˆåŠŸï¼<br/>{new Date().toLocaleTimeString()}</div>}
    </div>
  );
}

function SignBoard({t}){
  const [name,setName]=React.useState("");
  const [data,setData]=React.useState([]);
  const [posting,setPosting]=React.useState(false);

  const endpoint="https://script.google.com/macros/s/AKfycbyqXdNd0VsgaDg3jNIMmL3A3dSYjnovi54AC-ze1buRO0mK7AMOLeo3JquQwpSSABU/exec";

  React.useEffect(()=>{
    fetch(endpoint)
      .then(r=>r.json())
      .then(d=>setData(d.data||[]))
      .catch(()=>{});
  },[]);

  const add=()=>{
    if(!name.trim())return;
    const fruit=FRUITS[Math.floor(Math.random()*FRUITS.length)];
    setPosting(true);
    fetch(endpoint+`?name=${encodeURIComponent(name)}&fruit=${encodeURIComponent(fruit)}`)
      .then(r=>r.json())
      .then(()=>{setData(p=>[...p,{name,fruit}]);setName("");})
      .finally(()=>setPosting(false));
  };

  return (
    <div className="card p-6 mt-10 mb-24">
      <h2 className="text-2xl font-bold mb-2">{t.board}</h2>
      <p className="mb-4">{t.desc}</p>
      <div className="mt-4 flex flex-col sm:flex-row gap-2">
        <input value={name} onChange={e=>setName(e.target.value)} placeholder={t.input}
          className="flex-1 rounded-xl border-2 border-black px-3 py-3"/>
        <button onClick={add} disabled={posting}
          className="w-full sm:w-auto px-4 py-3 rounded-xl bg-[var(--yellow)] border-2 border-black font-bold">{posting?"é€å‡ºä¸­â€¦":t.btn}</button>
      </div>

      <div className="relative h-48 overflow-hidden mt-6">
        {data.map((f,i)=>(
          <div key={i} className="fruit" style={{
            left:Math.random()*90+"%",
            animationDuration:10+Math.random()*10+"s"
          }}>{f.fruit}</div>
        ))}
      </div>
    </div>
  );
}

function App(){
  const [lang,setLang]=React.useState("tw");
  const [entered,setEntered]=React.useState(false);
  const t=TEXT[lang];
  React.useEffect(()=>{
    const onFocusIn=e=>{
      if(["INPUT","TEXTAREA"].includes(e.target.tagName))document.body.classList.add("hide-lang");
    };
    const onFocusOut=()=>document.body.classList.remove("hide-lang");
    window.addEventListener("focusin",onFocusIn);
    window.addEventListener("focusout",onFocusOut);
    return()=>{window.removeEventListener("focusin",onFocusIn);window.removeEventListener("focusout",onFocusOut);}
  },[]);
  if(!entered)return <PunchCard onDone={()=>setEntered(true)}/>;
  return (
    <div className="p-4 pb-32 relative">
      <LangSwitcher lang={lang} setLang={setLang}/>
      <h1 className="text-center text-4xl hero mb-6">2025 å­¤èŠ³å°éšŠ GOOD FUN TEAM in è‰ç‡å­£</h1>
      <div className="card p-6">
        <h2 className="text-2xl font-bold mb-2">{t.concept}</h2>
        <p>é—œæ³¨åŸå¸‚ä¸­çš„æš«å±…ã€ç§»å‹•èˆ‡å®‰æ”¾ï¼›ä»¥ã€ŒæŸ”è»Ÿ Ã— å …å›ºã€çš„åª’æå°ä½ï¼Œè«‡è¨˜æ†¶èˆ‡ç”Ÿæ´»è·é›¢ã€‚</p>
      </div>
      <div className="card p-6 mt-8">
        <h2 className="text-2xl font-bold mb-2">{t.about}</h2>
        <p>å­¤èŠ³å°éšŠ GOOD FUN TEAM ç”± Rotion87 èˆ‡ ç¾… å…±åŒç¶“ç‡Ÿã€‚</p>
        <p className="mt-2">Rotion87ï¼šæ”å½±ï¼æ›¸ç±ï¼ç‰©ä»¶è¨­è¨ˆ</p>
        <p>ç¾…ï¼ˆl72uo_ï¼‰ï¼šé€ å‹ï¼æ‰‹ä½œï¼è§’è‰²è¨­å®š</p>
        <div className="flex gap-3 mt-4">
          <a href="https://www.instagram.com/rotion87" target="_blank"><img src="ig-rotion.png" className="w-10"/></a>
          <a href="https://www.instagram.com/l72uo_" target="_blank"><img src="ig-l72uo.png" className="w-10"/></a>
        </div>
      </div>
      <SignBoard t={t}/>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
